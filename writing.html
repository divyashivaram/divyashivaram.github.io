<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Writing - Divya Shivaram</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'magazine': {
                            'peach-pink': '#E5B4A5',
                            'coral': '#E87A5E',
                            'cream': '#F5F1EB',
                            'warm-brown': '#8E6A5B',
                            'paper-light': '#FBF9F6',
                            'sage': '#A0B4A6'
                        }
                    },
                    fontFamily: {
                        'serif': ['Playfair Display', 'serif'],
                        'sans': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <style>
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMDAgMzAwIj48ZmlsdGVyIGlkPSJuIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iMC45IiBudW1PY3RhdmVzPSIzIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI24pIi8+PC9zdmc+');
            opacity: 0.1;
            pointer-events: none;
            z-index: -1;
        }

        .nav-link {
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-link:hover {
            color: #E87A5E !important;
            text-decoration: underline;
            text-underline-offset: 4px;
        }

        /* 3-column grid — gap shows peach-pink background as separator */
        .posts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 3px;
        }

        @media (max-width: 900px) {
            .posts-grid { grid-template-columns: repeat(2, 1fr); }
        }

        @media (max-width: 560px) {
            .posts-grid { grid-template-columns: 1fr; }
        }

        /* Card: flex column, tag pinned top, content pushed to bottom */
        .post-block {
            display: flex;
            flex-direction: column;
            min-height: 260px;
            background: rgba(255, 250, 243, 0.57);
            padding: 1.25rem 1.5rem 1.5rem;
            border-radius: 12px;
            text-decoration: none;
            transition: background 0.2s ease;
        }

        .post-block:hover {
            background: rgba(255, 250, 243, 0.8);
        }

        /* Tag row: "Writing · Blog" left, ↗ right */
        .post-block-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .post-tag {
            font-size: 0.8rem;
            font-weight: 400;
            color: #4f3125;
        }

        .post-arrow {
            font-size: 0.9rem;
            color: #4f3125;
            opacity: 0.5;
            transition: opacity 0.2s ease;
        }

        .post-block:hover .post-arrow {
            opacity: 1;
        }

        /* Content section pushed to bottom */
        .post-block-content {
            margin-top: auto;
            padding-top: 2rem;
        }

        .post-title {
            font-size: 1.3rem;
            font-weight: 500;
            line-height: 1.3;
            color: #5d4035;
            margin-bottom: 0.4rem;
        }

        .post-date {
            font-size: 0.85rem;
            color: #4f3125;
            margin-bottom: 0.75rem;
        }

        .post-excerpt {
            font-size: 0.95rem;
            color: #543e34;
            line-height: 1.65;
        }

        @keyframes pulse-fade {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        .loading-shimmer {
            animation: pulse-fade 1.5s ease-in-out infinite;
        }
    </style>
</head>

<body class="bg-magazine-peach-pink font-sans antialiased">

    <!-- Header -->
    <header class="text-center pt-8 pb-4">
        <a href="index.html"
            class="font-sans text-magazine-warm-brown tracking-widest uppercase text-base font-semibold nav-link">
            Divya Sivaram
        </a>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-6 pt-16 pb-24">

        <!-- Page Title -->
        <div class="mb-12">
            <h1 class="font-serif text-6xl md:text-7xl mb-4 leading-tight" style="color: #cc5435;">
                writing.
            </h1>
            <p class="text-magazine-warm-brown text-lg leading-relaxed" style="opacity: 0.75;">
                My thoughts, weekly notes and reflections.
            </p>
        </div>

        <!-- Post Grid — populated by JS -->
        <div id="post-list" class="posts-grid">
            <!-- Loading skeletons -->
            <div class="post-block loading-shimmer">
                <div class="post-block-header">
                    <div class="h-3 bg-magazine-warm-brown rounded w-20" style="opacity: 0.2;"></div>
                </div>
                <div class="post-block-content">
                    <div class="h-5 bg-magazine-warm-brown rounded w-4/5 mb-1" style="opacity: 0.2;"></div>
                    <div class="h-5 bg-magazine-warm-brown rounded w-2/3 mb-3" style="opacity: 0.2;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-24 mb-4" style="opacity: 0.15;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-full mb-1" style="opacity: 0.12;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-5/6" style="opacity: 0.12;"></div>
                </div>
            </div>
            <div class="post-block loading-shimmer" style="animation-delay: 0.15s;">
                <div class="post-block-header">
                    <div class="h-3 bg-magazine-warm-brown rounded w-20" style="opacity: 0.2;"></div>
                </div>
                <div class="post-block-content">
                    <div class="h-5 bg-magazine-warm-brown rounded w-full mb-1" style="opacity: 0.2;"></div>
                    <div class="h-5 bg-magazine-warm-brown rounded w-3/4 mb-3" style="opacity: 0.2;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-24 mb-4" style="opacity: 0.15;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-full mb-1" style="opacity: 0.12;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-4/5" style="opacity: 0.12;"></div>
                </div>
            </div>
            <div class="post-block loading-shimmer" style="animation-delay: 0.3s;">
                <div class="post-block-header">
                    <div class="h-3 bg-magazine-warm-brown rounded w-20" style="opacity: 0.2;"></div>
                </div>
                <div class="post-block-content">
                    <div class="h-5 bg-magazine-warm-brown rounded w-3/5 mb-3" style="opacity: 0.2;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-24 mb-4" style="opacity: 0.15;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-full mb-1" style="opacity: 0.12;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-3/4 mb-1" style="opacity: 0.12;"></div>
                    <div class="h-3 bg-magazine-warm-brown rounded w-5/6" style="opacity: 0.12;"></div>
                </div>
            </div>
        </div>

        <!-- Archive Link -->
        <div class="pt-12">
            <a href="https://divyashivaram.substack.com/" target="_blank" rel="noopener noreferrer"
                class="nav-link text-magazine-warm-brown text-base">
                Full archive on Substack →
            </a>
        </div>

    </main>

    <!-- Footer Navigation -->
    <footer class="text-center py-12">
        <nav class="flex flex-wrap items-center justify-center text-base space-x-3 text-magazine-warm-brown">
            <a href="index.html" class="nav-link">← Home</a>
            <span class="opacity-50">|</span>
            <a href="about.html" class="nav-link">About me</a>
            <span class="opacity-50">|</span>
            <a href="work.html" class="nav-link">Work</a>
            <span class="opacity-50">|</span>
            <a href="digital-garden.html" class="nav-link">Digital Garden</a>
        </nav>
    </footer>

    <script>
        function fixGridLayout(container) {
            const cards = container.querySelectorAll('.post-block');
            const count = cards.length;
            // A lone item in the last row (count % 3 === 1) leaves 2 empty slots — not allowed.
            // Span the last item across 2 columns so only 1 slot is empty.
            if (count % 3 === 1 && count > 1) {
                cards[cards.length - 1].style.gridColumn = 'span 2';
            }
        }

        async function loadSubstackPosts() {
            const container = document.getElementById('post-list');
            const feedUrl = 'https://divyashivaram.substack.com/feed';
            const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`;

            function renderCard(link, title, date, excerpt) {
                return `
                    <a href="${link}" target="_blank" rel="noopener noreferrer" class="post-block">
                        <div class="post-block-header">
                            <span class="post-tag">Writing · Blog</span>
                            <span class="post-arrow">↗</span>
                        </div>
                        <div class="post-block-content">
                            <p class="post-title">${title}</p>
                            <p class="post-date">${date}</p>
                            ${excerpt ? `<p class="post-excerpt">${excerpt}</p>` : ''}
                        </div>
                    </a>
                `;
            }

            try {
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.status !== 'ok' || !data.items?.length) {
                    throw new Error('No posts returned');
                }

                container.innerHTML = data.items.map(item => {
                    const date = new Date(item.pubDate);
                    const formattedDate = date.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });

                    const tmp = document.createElement('div');
                    tmp.innerHTML = item.description || '';
                    const rawText = (tmp.textContent || tmp.innerText || '').trim();
                    const excerpt = rawText.length > 180 ? rawText.slice(0, 177) + '…' : rawText;

                    return renderCard(item.link, item.title, formattedDate, excerpt);
                }).join('');
                fixGridLayout(container);

            } catch (err) {
                container.innerHTML = [
                    ['https://divyashivaram.substack.com/p/february-2026-week-notes-2-3-and', 'February 2026 - Week notes 2, 3 and maybe 4?', 'February 25, 2026', 'swaying between light and dark - am i oreo?'],
                    ['https://divyashivaram.substack.com/p/february-2026-week-note-1', 'February 2026 - Week note 1', 'February 9, 2026', 'friends, work, celebration'],
                    ['https://divyashivaram.substack.com/p/january-week-notes-3-and-4', 'January - Week notes 3 & 4', 'January 28, 2026', 'writing block, linkin park, abhinay\'s birthday'],
                ].map(([link, title, date, excerpt]) => renderCard(link, title, date, excerpt)).join('');
                fixGridLayout(container);
            }
        }

        loadSubstackPosts();
    </script>

</body>

</html>
